<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tennis Club Boussens</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <a href="#accueil" class="skip-link">Aller au contenu</a>
  <header class="site-header">
    <div class="header-inner">
      <div class="logo-section">
        <img src="images/tcb_logo.png" alt="Tennis Club Boussens - Courts de Tennis" class="site-logo">
        <h1>Tennis Club Boussens</h1>
      </div>
      <button class="nav-toggle" aria-label="Menu" aria-controls="site-nav" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
      <nav id="site-nav">
        <ul>
          <li><a href="#accueil">Accueil</a></li>
          <li><a class="external" href="https://demo.plugin.ch/">R√©s√©rvations</a></li>
          <li><a href="#comite">Comit√©</a></li>
          <li><a href="#reglement">R√®glement / Statuts</a></li>
          <li><a href="#cotisations">Cotisations</a></li>
          <li><a href="#plan">Plan d'acc√®s</a></li>
          <li><a href="#ecole">√âcole de Tennis</a></li>
          <li><a href="#contacts">Contacts</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <section id="accueil">
      <h2>Accueil</h2>
      <div class="news is-collapsed" aria-labelledby="titre-news" data-sheet-id="1x2uQnKSlZUdPKg5TacBSHKkSHy5UrKSn-KGHXPhffG4" data-sheet-gid="0">
        <button class="news-toggle" aria-expanded="false" aria-controls="news-panel" id="titre-news">
          <span class="news-toggle__icon" aria-hidden="true">‚ñ∏</span>
          <span class="news-toggle__label">News</span>
        </button>
        <div id="news-panel" class="news-panel" hidden>
          <div class="news-status" data-status>Chargement des actualit√©s‚Ä¶</div>
          <div class="news-list" role="list"></div>
          <noscript><p style="font-size:.75rem;opacity:.7">Activez JavaScript pour voir les actualit√©s.</p></noscript>
        </div>
      </div>
      <p>Cherchez-vous une place pas loin de chez vous pour pratiquer votre sport favori, le tennis?</p>
      <p>En avez-vous assez des bruits incessants de la ville et du trafic?</p>
      <p>Voulez-vous respirer le grand air de la campagne?</p>
      <p>Si c‚Äôest le cas, c‚Äôest √©videmment sur les deux nouveaux courts du Tennis Club Boussens que vous DEVEZ venir jouer!!!</p>
      <p>Une bonne partie de tennis dans le calme de la campagne vaudoise, rien de telle pour se ressourcer, √©vacuer le stress quotidien!</p>
      <p>Devenez imm√©diatement membre du club en vous inscrivant online.</p>
      <p>Si vous n‚Äôhabitez pas la petite commune de Boussens, n‚Äôh√©sitez pas, vous pourrez profiter des nombreux services mis √† votre disposition, notamment la r√©servation des courts en ligne!</p>
      <img src="images/tcb_terrains.jpg" alt="Collage de photos des courts en terre battue du Tennis Club Boussens" style="max-width:100%; height:auto; margin-top:1rem;">
      <img src="tcb_terrains.jpg" alt="Collage de photos des courts en terre battue du Tennis Club Boussens" style="max-width:100%; height:auto; margin-top:1rem;">
      <p><strong>Alain Beguin est le meilleur joueur du club</strong></p>
  <p><a class="btn primary" href="#cotisations">‚Üí Voir les tarifs Cotisations</a></p>
    </section>

    <section id="comite">
        <h2>Comit√©</h2>

        <div class="comite-card">
            <h3>Patrick Dizerens</h3>
            <p><strong>Fonction :</strong> Pr√©sident</p>
            <p><strong>Adresse :</strong> Chemin du Pontet 2, 1034 Boussens</p>
            <p><strong>Email :</strong> didi1963(at)bluewin.ch</p>
            <p><strong>T√©l√©phone :</strong> 078 641/05/65</p>
        </div>

        <div class="comite-card">
            <h3>Enzo Di Massa</h3>
            <p><strong>Fonction :</strong> Vice-pr√©sident</p>
            <p><strong>Adresse :</strong> Rte de Lausanne 14c, 1040 Echallens</p>
            <p><strong>Email :</strong> vincenzo.dimassa(at)bluewin.ch</p>
            <p><strong>T√©l√©phone :</strong> 079 522/05/37</p>
        </div>

        <div class="comite-card">
            <h3>Philippe Grandchamp</h3>
            <p><strong>Fonction :</strong> Caissier</p>
            <p><strong>Adresse :</strong> Chemin de la Borne 2, 1055 Froideville</p>
            <p><strong>Email :</strong> philippe.grandchamp(at)tcboussens.ch</p>
            <p><strong>T√©l√©phone :</strong> 021 882/56/82 / 079 706/59/68</p>
        </div>

        <div class="comite-card">
            <h3>Olivier Decroes</h3>
            <p><strong>Fonction :</strong> Secr√©taire</p>
            <p><strong>Adresse :</strong> Ruelle de la Chapelle 7, 1034 Boussens</p>
            <p><strong>Email :</strong> tcboussens(at)bluewin.ch</p>
            <p><strong>T√©l√©phone :</strong> 076 529/35/89</p>
        </div>

        <div class="comite-card">
            <h3>Eyal Kaspi</h3>
            <p><strong>Fonction :</strong> Membre</p>
            <p><strong>Adresse :</strong> Grand'Rue 12, 1034 Boussens</p>
            <p><strong>Email :</strong> eyal.kaspi(at)gmail.com</p>
            <p><strong>T√©l√©phone :</strong> 078 784/88/00</p>
        </div>

        <div class="comite-card">
            <h3>L√©andre Kaspi</h3>
            <p><strong>Fonction :</strong> Jardinier</p>
            <p><strong>Adresse :</strong> Grand'Rue 12, 1034 Boussens</p>
            <p><strong>Email :</strong> leandre.kaspi(at)gmail.com</p>
            <p><strong>T√©l√©phone :</strong> 076 626/92/59</p>
        </div>
</section>


    <section id="reglement">
      <h2>R√®glement / Statuts</h2>
      <div class="rules" data-rules>
        <article class="rule-block" data-rule-block data-open>
          <button type="button" class="rule-toggle" aria-expanded="true">
            <span class="rule-toggle__title">Les r√©servations</span>
            <span class="rule-toggle__chevron" aria-hidden="true">‚ñæ</span>
          </button>
          <div class="rule-panel" role="region">
            <ul>
              <li>Les r√©servations sont obligatoires et se font online sur le site du Tennis Club Boussens.</li>
              <li>Pour enregistrer une r√©servation, il est obligatoire d'√™tre membre du club.</li>
              <li>Lors de l'enregistrement d'une r√©servation, il est obligatoire de sp√©cifier son partenaire de jeu. Celui-ci peut √™tre soit un membre du Club (gratuit), soit un invit√© junior (CHF 10.-) ou adulte (CHF 15.-).</li>
              <li>Un membre a le droit de faire 5 r√©servation(s) par semaine dont seulement 4 r√©servation(s) apr√®s 18h00.</li>
              <li>Une r√©servation enregistr√©e au maximum 60 minute(s) avant celle-ci est consid√©r√©e comme une r√©servation "last minute". Une r√©servation "last minute" n'est pas prise en compte dans les r√©servations de la semaine. Le nombre de r√©servation "last minute" par semaine n'est pas limit√©.</li>
              <li>Un membre n'a pas le droit de r√©server les deux terrains en m√™me temps.</li>
              <li>Un membre n'a pas le droit de r√©server deux plages horaires qui se suivent.</li>
              <li>Une r√©servation peut √™tre enregistr√©e au maximum 10 jour(s) avant celle-ci.</li>
              <li>Une r√©servation peut √™tre annul√©e jusqu'√† 60 minute(s) avant celle-ci.</li>
            </ul>
          </div>
        </article>
        <article class="rule-block" data-rule-block>
          <button type="button" class="rule-toggle" aria-expanded="false">
            <span class="rule-toggle__title">Utilisation des courts</span>
            <span class="rule-toggle__chevron" aria-hidden="true">‚ñæ</span>
          </button>
          <div class="rule-panel" role="region" hidden>
            <ul>
              <li>Les courts doivent √™tre bross√©s apr√®s chaque utilisation.</li>
              <li>Les lumi√®res sont allum√©es uniquement si cela est n√©cessaire.</li>
              <li>Les lumi√®res s'√©teignent automatiquement √† 22h00. Veillez donc √† brosser le court avant cette √©ch√©ance.</li>
            </ul>
          </div>
        </article>
        <article class="rule-block subtle" data-rule-block>
          <button type="button" class="rule-toggle" aria-expanded="false">
            <span class="rule-toggle__title">Cotisations & Invitations</span>
            <span class="rule-toggle__chevron" aria-hidden="true">‚ñæ</span>
          </button>
          <div class="rule-panel" role="region" hidden>
            <p>Consultez les formules et tarifs d'adh√©sion dans la section <a href="#cotisations"><strong>Cotisations</strong></a> ci‚Äëdessous.</p>
          </div>
        </article>
      </div>
    </section>

    <section id="cotisations">
      <h2>Cotisations</h2>
      <p class="intro">D√©couvrez nos formules d'adh√©sion. Chaque cotisation inclut l'acc√®s aux courts, la r√©servation en ligne et la participation aux activit√©s du club.</p>
      <div class="pricing-grid">
        <div class="price-card highlight">
          <div class="price-card__head">
            <h3>Adulte</h3>
            <span class="badge">Standard</span>
          </div>
            <p class="price"><span>290</span><small>.‚Äì / an</small></p>
            <ul class="features">
              <li>Acc√®s illimit√© courts</li>
              <li>Tournoi interne</li>
            </ul>
        </div>
        <div class="price-card">
          <div class="price-card__head">
            <h3>Junior</h3>
            <span class="badge neutral">-18</span>
          </div>
          <p class="price"><span>100</span><small>.‚Äì / an</small></p>
          <ul class="features">
            <li>√âcole juniors</li>
            <li>Tournoi juniors</li>
          </ul>
        </div>
        <div class="price-card">
          <div class="price-card__head">
            <h3>√âtudiant</h3>
            <span class="badge neutral">‚â•18</span>
          </div>
          <p class="price"><span>140</span><small>.‚Äì / an</small></p>
          <ul class="features">
            <li>Acc√®s illimit√©</li>
          </ul>
        </div>
        <div class="price-card">
          <div class="price-card__head">
            <h3>Couple</h3>
            <span class="badge">Duo</span>
          </div>
          <p class="price"><span>510</span><small>.‚Äì / an</small></p>
          <ul class="features">
            <li>2 acc√®s adultes</li>
          </ul>
        </div>
        <div class="price-card">
          <div class="price-card__head">
            <h3>Famille</h3>
            <span class="badge">Pack</span>
          </div>
          <p class="price"><span>590</span><small>.‚Äì / an</small></p>
          <ul class="features">
            <li>2 adultes + juniors</li>
          </ul>
        </div>
      </div>
      <div class="notes">
        <h3>Informations Utiles</h3>
        <ul>
          <li>Junior: jusqu'√† 18 ans non r√©volus.</li>
          <li>Attestation requise pour le tarif √©tudiant.</li>
          <li>Les cotisations couvrent l'ann√©e civile (non fractionnables).</li>
          <li>Invit√©: Junior 10.‚Äì / s√©ance, Adulte 15.‚Äì / s√©ance.</li>
        </ul>
      </div>
      <div class="cta-center">
        <a href="https://demo.plugin.ch/" class="btn primary">Devenir membre</a>
        <a href="#reglement" class="btn">Voir le r√®glement</a>
      </div>
    </section>

    <section id="plan">
        <h2>Plan d'acc√®s</h2>
        <p>Le Tennis Club Boussens est situ√© dans un cadre paisible √† la campagne vaudoise.</p>
        <div style="width: 100%; height: 400px; margin-top: 1rem;">
            <iframe
            src="https://www.google.com/maps?q=46.6007999,6.5892179&hl=fr&z=15&output=embed"
            width="100%"
            height="100%"
            style="border:0;"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade">
            </iframe>
        </div>
        </section>


    <section id="ecole">
      <h2>√âcole de Tennis</h2>
      <p>Une toute bienvenue √† toutes celles et √† ceux qui souhaitent rejoindre la nouvelle saison d‚Äôentra√Ænements de l‚Äô√©cole de tennis au TC Boussens.</p>
      <ul>
        <li>Au programme, 18 semaines de cours juniors collectifs</li>
        <li>1√®re partie: des vacances de P√¢ques aux vacances d'√©t√© et 2√®me partie: des vacances d'√©t√© aux vacances d'automne (avec une pause pendant les vacances scolaires d'√©t√©)</li>
        <li>Les inscriptions sont possibles en tout temps, sous r√©serve des places disponibles</li>
        <li>Le TARIF des cours collectifs pour toute la saison √† raison d‚Äôun cours par semaine, est publi√© dans les News du site</li>
        <li>Des cours priv√©s (adultes) sont aussi prodigu√©s sur demande (contacter Le Comit√© / Responsable cours ‚Äì juniors)</li>
      </ul>
    </section>

    <section id="contacts">
        <h2>Contacts</h2>
        <p>Pour toute question concernant le club, les r√©servations, les cours ou les cotisations, n‚Äôh√©sitez pas √† contacter un membre du <a href="#comite">Comit√©</a>.</p>
    </section>

  </main>

<script>
  // Navigation mono-page + menu mobile
  document.addEventListener('DOMContentLoaded', () => {
  const sections = document.querySelectorAll('main section');
  // Liens internes (ancre #...) non externes
  const internalLinks = document.querySelectorAll('a[href^="#"]:not(.external)');
    const toggleBtn = document.querySelector('.nav-toggle');
    const nav = document.getElementById('site-nav');
    

  const newsContainer = document.querySelector('.news');
  const newsToggle = newsContainer?.querySelector('.news-toggle');
  const newsPanel = newsContainer?.querySelector('.news-panel');
  const newsStatus = newsPanel?.querySelector('[data-status]');
  const newsList = newsPanel?.querySelector('.news-list');

    function showSection(id) {
      // V√©rifier si la section existe avant de proc√©der
      const targetSection = document.getElementById(id);
      if (!targetSection) {
        console.warn(`Section with id "${id}" not found`);
        return false;
      }
      
      // Cacher toutes les sections et afficher la section cible
      sections.forEach(sec => {
        sec.style.display = (sec.id === id) ? 'block' : 'none';
      });
      
      // Marquage actif des liens de navigation
      internalLinks.forEach(l => {
        const target = l.getAttribute('href').substring(1);
        l.classList.toggle('active', target === id);
      });
      
      return true;
    }
    showSection('accueil');
    internalLinks.forEach(link => {
      link.addEventListener('click', e => {
        const hash = link.getAttribute('href');
        if (!hash || !hash.startsWith('#')) return;
        e.preventDefault();
        
        const id = hash.substring(1);
        if (id && showSection(id)) {
          // Seulement faire d√©filer vers le haut si la section a √©t√© trouv√©e et affich√©e
          window.scrollTo({ top: 0, behavior: 'smooth' });
          
          // Fermer le menu mobile s'il est ouvert
          if (toggleBtn && toggleBtn.getAttribute('aria-expanded') === 'true') {
            toggleBtn.click();
          }
        }
      });
    });

    // Toggle mobile
    toggleBtn.addEventListener('click', () => {
      const expanded = toggleBtn.getAttribute('aria-expanded') === 'true';
      toggleBtn.setAttribute('aria-expanded', String(!expanded));
      nav.classList.toggle('open');
      toggleBtn.classList.toggle('open');
    });

    // News collapsible
    if (newsToggle && newsPanel) {
      newsToggle.addEventListener('click', () => {
        const expanded = newsToggle.getAttribute('aria-expanded') === 'true';
        newsToggle.setAttribute('aria-expanded', String(!expanded));
        newsPanel.hidden = expanded; // cache si on replie
        newsContainer.classList.toggle('is-expanded', !expanded);
        newsContainer.classList.toggle('is-collapsed', expanded);
      });
    }

    // Chargement dynamique des news depuis Google Sheets
    if (newsContainer && newsList) {
      const SHEET_ID = newsContainer.getAttribute('data-sheet-id');
      const SHEET_GID = newsContainer.getAttribute('data-sheet-gid') || '0';
      const CSV_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${SHEET_GID}`;

      fetch(CSV_URL, { cache: 'no-store' })
        .then(r => {
          if (!r.ok) throw new Error('HTTP ' + r.status);
          return r.text();
        })
        .then(text => {
          // Parsing CSV simple avec support des champs quot√©s
          const rows = [];
          let cur = ''; let inQuotes = false; let row = [];
          for (let i = 0; i < text.length; i++) {
            const c = text[i];
            const next = text[i+1];
            if (c === '"') {
              if (inQuotes && next === '"') { cur += '"'; i++; }
              else { inQuotes = !inQuotes; }
            } else if (c === ',' && !inQuotes) {
              row.push(cur.trim()); cur = '';
            } else if ((c === '\n' || c === '\r') && !inQuotes) {
              if (cur.length || row.length) { row.push(cur.trim()); rows.push(row); row = []; cur=''; }
            } else {
              cur += c;
            }
          }
          if (cur.length || row.length) { row.push(cur.trim()); rows.push(row); }

          if (!rows.length) throw new Error('Aucune donn√©e');
          // Enlever header
            const data = rows.slice(1).filter(r => r.some(v => v));
          // Construire objets
          const items = data.map(r => ({
            dateRaw: r[0] || '',
            title: r[1] || 'Sans titre',
            body: r[2] || ''
          })).filter(it => it.title || it.body);

          // Trier par date (si parse possible)
          items.sort((a,b) => new Date(b.dateRaw) - new Date(a.dateRaw));

          if (!items.length) {
            newsStatus.textContent = 'Aucune actualit√© pour le moment.';
            return;
          }

          newsStatus.remove();
          const fmt = new Intl.DateTimeFormat('fr-CH', { dateStyle: 'medium' });
          items.forEach(it => {
            const article = document.createElement('article');
            article.className = 'news-item';
            article.setAttribute('role','listitem');
            const date = it.dateRaw && !isNaN(new Date(it.dateRaw)) ? fmt.format(new Date(it.dateRaw)) : it.dateRaw;
            article.innerHTML = `
              <h4>${escapeHtml(it.title)}</h4>
              <p class="news-meta">${date ? '<time>'+escapeHtml(date)+'</time>' : ''}</p>
              <p>${linkify(escapeHtml(it.body)).replace(/\n/g,'<br>')}</p>
            `;
            newsList.appendChild(article);
          });
        })
        .catch(err => {
          if (newsStatus) newsStatus.textContent = 'Impossible de charger les actualit√©s (' + err.message + ').';
        });
    }

    // Utilitaires d'√©chappement & linkify
    function escapeHtml(str='') {
      return str.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c]));
    }
    function linkify(str='') {
      const urlRegex = /(https?:\/\/[^\s]+)/g;
      return str.replace(urlRegex, url => `<a href="${url}" target="_blank" rel="noopener">${url}</a>`);
    }

    // Accord√©on R√®glement
    const ruleBlocks = document.querySelectorAll('[data-rule-block]');
    ruleBlocks.forEach(block => {
      const btn = block.querySelector('.rule-toggle');
      const panel = block.querySelector('.rule-panel');
      if (!btn || !panel) return;
      if (block.hasAttribute('data-open')) {
        panel.style.maxHeight = panel.scrollHeight + 'px';
      }
      btn.addEventListener('click', () => {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        
        // Close all other accordions first
        ruleBlocks.forEach(otherBlock => {
          if (otherBlock !== block) {
            const otherBtn = otherBlock.querySelector('.rule-toggle');
            const otherPanel = otherBlock.querySelector('.rule-panel');
            if (otherBtn && otherPanel) {
              otherBtn.setAttribute('aria-expanded', 'false');
              otherPanel.setAttribute('hidden', '');
              otherPanel.style.maxHeight = '0px';
              otherBlock.classList.remove('is-open');
            }
          }
        });
        
        // Toggle current accordion
        btn.setAttribute('aria-expanded', String(!expanded));
        if (expanded) {
          panel.setAttribute('hidden','');
          panel.style.maxHeight = '0px';
        } else {
          panel.removeAttribute('hidden');
          panel.style.maxHeight = panel.scrollHeight + 'px';
        }
        block.classList.toggle('is-open', !expanded);
      });
    });

    // Price card selection functionality
    const priceCards = document.querySelectorAll('.price-card');
    priceCards.forEach(card => {
      card.addEventListener('click', () => {
        // Remove selected and highlight classes from all cards
        priceCards.forEach(otherCard => {
          otherCard.classList.remove('selected', 'highlight');
        });
        
        // Add selected class to clicked card
        card.classList.add('selected');
      });
    });

    // Hidden Tennis Game
    const siteLogo = document.querySelector('.site-logo');
    const gameOverlay = document.getElementById('tennis-game');
    const gameCanvas = document.getElementById('game-canvas');
    const ctx = gameCanvas.getContext('2d');
    const startBtn = document.getElementById('game-start');
    const pauseBtn = document.getElementById('game-pause');
    const closeBtn = document.getElementById('game-close');
    const playerScoreEl = document.getElementById('player-score');
    const botScoreEl = document.getElementById('bot-score');
    const gameStatusEl = document.getElementById('game-status');

    let gameRunning = false;
    let gamePaused = false;
    let animationId = null;
    let mouseY = 0;

    // Game objects
    const game = {
      player: { x: 10, y: 150, width: 10, height: 80, score: 0 },
      bot: { x: 780, y: 150, width: 10, height: 80, score: 0 },
      ball: { x: 400, y: 200, width: 10, height: 10, vx: 5, vy: 3 }
    };

    // Logo click event to show game
    siteLogo.addEventListener('click', (e) => {
      e.preventDefault();
      showGame();
    });

    // Game controls
    startBtn.addEventListener('click', startGame);
    pauseBtn.addEventListener('click', togglePause);
    closeBtn.addEventListener('click', hideGame);

    // ESC key to close game
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && gameOverlay.style.display !== 'none') {
        hideGame();
      }
    });

    // Mouse movement for player paddle
    gameCanvas.addEventListener('mousemove', (e) => {
      const rect = gameCanvas.getBoundingClientRect();
      const scaleY = gameCanvas.height / rect.height;
      mouseY = (e.clientY - rect.top) * scaleY;
    });

    function showGame() {
      gameOverlay.style.display = 'flex';
      resetGame();
      gameStatusEl.textContent = "Cliquez sur 'Commencer' pour jouer!";
    }

    function hideGame() {
      gameOverlay.style.display = 'none';
      stopGame();
    }

    function startGame() {
      if (!gameRunning) {
        gameRunning = true;
        gamePaused = false;
        gameStatusEl.textContent = "Jeu en cours - Bonne chance contre le bot!";
        gameLoop();
      }
    }

    function togglePause() {
      if (gameRunning) {
        gamePaused = !gamePaused;
        gameStatusEl.textContent = gamePaused ? "Jeu en pause" : "Jeu en cours - Bonne chance contre le bot!";
        if (!gamePaused) {
          gameLoop();
        }
      }
    }

    function stopGame() {
      gameRunning = false;
      gamePaused = false;
      if (animationId) {
        cancelAnimationFrame(animationId);
        animationId = null;
      }
    }

    function resetGame() {
      game.player.y = 160;
      game.bot.y = 160;
      game.ball.x = 400;
      game.ball.y = 200;
      game.ball.vx = Math.random() > 0.5 ? 5 : -5;
      game.ball.vy = (Math.random() - 0.5) * 6;
      game.player.score = 0;
      game.bot.score = 0;
      updateScore();
    }

    function updateScore() {
      playerScoreEl.textContent = game.player.score;
      botScoreEl.textContent = game.bot.score;
    }

    function gameLoop() {
      if (!gameRunning || gamePaused) return;

      update();
      draw();
      
      animationId = requestAnimationFrame(gameLoop);
    }

    function update() {
      // Update player paddle (follow mouse with some smoothing)
      const targetY = mouseY - game.player.height / 2;
      game.player.y += (targetY - game.player.y) * 0.1;
      
      // Keep player paddle in bounds
      game.player.y = Math.max(0, Math.min(gameCanvas.height - game.player.height, game.player.y));

      // Update bot paddle (impossible AI - perfect tracking with slight delay for realism)
      const ballCenterY = game.ball.y + game.ball.height / 2;
      const paddleCenterY = game.bot.y + game.bot.height / 2;
      const botSpeed = 8; // Very fast bot
      
      if (ballCenterY < paddleCenterY - 5) {
        game.bot.y -= botSpeed;
      } else if (ballCenterY > paddleCenterY + 5) {
        game.bot.y += botSpeed;
      }
      
      // Keep bot paddle in bounds
      game.bot.y = Math.max(0, Math.min(gameCanvas.height - game.bot.height, game.bot.y));

      // Update ball
      game.ball.x += game.ball.vx;
      game.ball.y += game.ball.vy;

      // Ball collision with top and bottom
      if (game.ball.y <= 0 || game.ball.y >= gameCanvas.height - game.ball.height) {
        game.ball.vy = -game.ball.vy;
      }

      // Ball collision with player paddle
      if (game.ball.x <= game.player.x + game.player.width &&
          game.ball.x + game.ball.width >= game.player.x &&
          game.ball.y <= game.player.y + game.player.height &&
          game.ball.y + game.ball.height >= game.player.y) {
        game.ball.vx = Math.abs(game.ball.vx); // Always bounce right
        // Add some angle based on where it hit the paddle
        const hitPoint = (game.ball.y + game.ball.height/2 - game.player.y) / game.player.height;
        game.ball.vy = (hitPoint - 0.5) * 8;
      }

      // Ball collision with bot paddle
      if (game.ball.x + game.ball.width >= game.bot.x &&
          game.ball.x <= game.bot.x + game.bot.width &&
          game.ball.y <= game.bot.y + game.bot.height &&
          game.ball.y + game.ball.height >= game.bot.y) {
        game.ball.vx = -Math.abs(game.ball.vx); // Always bounce left
        // Add some angle based on where it hit the paddle
        const hitPoint = (game.ball.y + game.ball.height/2 - game.bot.y) / game.bot.height;
        game.ball.vy = (hitPoint - 0.5) * 8;
      }

      // Scoring
      if (game.ball.x < 0) {
        game.bot.score++;
        updateScore();
        resetBall();
        if (game.bot.score >= 10) {
          endGame('Le bot a gagn√©! Comme pr√©vu, il est imbattable! ü§ñ');
        }
      } else if (game.ball.x > gameCanvas.width) {
        game.player.score++;
        updateScore();
        resetBall();
        if (game.player.score >= 10) {
          endGame('Impossible! Vous avez battu le bot! üèÜ');
        }
      }
    }

    function resetBall() {
      game.ball.x = gameCanvas.width / 2;
      game.ball.y = gameCanvas.height / 2;
      game.ball.vx = Math.random() > 0.5 ? 5 : -5;
      game.ball.vy = (Math.random() - 0.5) * 6;
    }

    function endGame(message) {
      stopGame();
      gameStatusEl.textContent = message + ' Cliquez sur Commencer pour rejouer.';
    }

    function draw() {
      // Clear canvas
      ctx.fillStyle = '#0a5a0a';
      ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);

      // Draw tennis court lines
      ctx.strokeStyle = 'white';
      ctx.lineWidth = 2;
      
      // Center line
      ctx.setLineDash([5, 5]);
      ctx.beginPath();
      ctx.moveTo(gameCanvas.width / 2, 0);
      ctx.lineTo(gameCanvas.width / 2, gameCanvas.height);
      ctx.stroke();
      
      // Court boundaries
      ctx.setLineDash([]);
      ctx.strokeRect(0, 0, gameCanvas.width, gameCanvas.height);

      // Draw paddles
      ctx.fillStyle = '#ff6b35';
      ctx.fillRect(game.player.x, game.player.y, game.player.width, game.player.height);
      
      ctx.fillStyle = '#3498db';
      ctx.fillRect(game.bot.x, game.bot.y, game.bot.width, game.bot.height);

      // Draw ball (tennis ball style)
      ctx.fillStyle = '#f1c40f';
      ctx.fillRect(game.ball.x, game.ball.y, game.ball.width, game.ball.height);
      
      // Add tennis ball lines
      ctx.strokeStyle = 'white';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.arc(game.ball.x + game.ball.width/2, game.ball.y + game.ball.height/2, game.ball.width/2, 0, Math.PI * 2);
      ctx.stroke();
    }
  });
</script>

<!-- Hidden Tennis Game -->
<div id="tennis-game" class="tennis-game-overlay" style="display: none;">
  <div class="game-container">
    <div class="game-header">
      <h2>Tennis Club Boussens - Jeu Secret</h2>
      <div class="game-controls">
        <button id="game-start" class="game-btn">Commencer</button>
        <button id="game-pause" class="game-btn">Pause</button>
        <button id="game-close" class="game-btn">Fermer (ESC)</button>
      </div>
    </div>
    <div class="game-info">
      <div class="score">
        <span id="player-score">0</span> - <span id="bot-score">0</span>
      </div>
      <div class="game-status" id="game-status">Cliquez sur "Commencer" pour jouer!</div>
    </div>
    <canvas id="game-canvas" width="800" height="400"></canvas>
    <div class="game-instructions">
      <p>üéæ Utilisez votre souris pour bouger votre raquette</p>
      <p>‚ö†Ô∏è Attention: Le bot est imbattable!</p>
    </div>
  </div>
</div>

</body>
