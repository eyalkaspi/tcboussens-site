<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tennis Club Boussens</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <a href="#accueil" class="skip-link">Aller au contenu</a>
  <header class="site-header">
    <div class="header-inner">
      <h1>Tennis Club Boussens</h1>
      <button class="nav-toggle" aria-label="Menu" aria-controls="site-nav" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
      <nav id="site-nav">
        <ul>
          <li><a href="#accueil">Accueil</a></li>
          <li><a class="external" href="https://demo.plugin.ch/">Résérvations</a></li>
          <li><a href="#comite">Comité</a></li>
          <li><a href="#reglement">Règlement / Statuts</a></li>
          <li><a href="#cotisations">Cotisations</a></li>
          <li><a href="#plan">Plan d'accès</a></li>
          <li><a href="#ecole">École de Tennis</a></li>
          <li><a href="#contacts">Contacts</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <section id="accueil">
      <h2>Accueil</h2>
      <div class="news is-collapsed" aria-labelledby="titre-news" data-sheet-id="1x2uQnKSlZUdPKg5TacBSHKkSHy5UrKSn-KGHXPhffG4" data-sheet-gid="0">
        <button class="news-toggle" aria-expanded="false" aria-controls="news-panel" id="titre-news">
          <span class="news-toggle__icon" aria-hidden="true">▸</span>
          <span class="news-toggle__label">News</span>
        </button>
        <div id="news-panel" class="news-panel" hidden>
          <div class="news-status" data-status>Chargement des actualités…</div>
          <div class="news-list" role="list"></div>
          <noscript><p style="font-size:.75rem;opacity:.7">Activez JavaScript pour voir les actualités.</p></noscript>
        </div>
      </div>
      <p>Cherchez-vous une place pas loin de chez vous pour pratiquer votre sport favori, le tennis?</p>
      <p>En avez-vous assez des bruits incessants de la ville et du trafic?</p>
      <p>Voulez-vous respirer le grand air de la campagne?</p>
      <p>Si c’est le cas, c’est évidemment sur les deux nouveaux courts du Tennis Club Boussens que vous DEVEZ venir jouer!!!</p>
      <p>Une bonne partie de tennis dans le calme de la campagne vaudoise, rien de telle pour se ressourcer, évacuer le stress quotidien!</p>
      <p>Devenez immédiatement membre du club en vous inscrivant online.</p>
      <p>Si vous n’habitez pas la petite commune de Boussens, n’hésitez pas, vous pourrez profiter des nombreux services mis à votre disposition, notamment la réservation des courts en ligne!</p>
      <img src="images/tcb_terrains.jpg" alt="Collage de photos des courts en terre battue du Tennis Club Boussens" style="max-width:100%; height:auto; margin-top:1rem;">
  <p><a class="btn primary" href="#cotisations">→ Voir les tarifs Cotisations</a></p>
    </section>

    <section id="comite">
        <h2>Comité</h2>

        <div class="comite-card">
            <h3>Patrick Dizerens</h3>
            <p><strong>Fonction :</strong> Président</p>
            <p><strong>Adresse :</strong> Chemin du Pontet 2, 1034 Boussens</p>
            <p><strong>Email :</strong> didi1963(at)bluewin.ch</p>
            <p><strong>Téléphone :</strong> 078 641/05/65</p>
        </div>

        <div class="comite-card">
            <h3>Enzo Di Massa</h3>
            <p><strong>Fonction :</strong> Vice-président</p>
            <p><strong>Adresse :</strong> Rte de Lausanne 14c, 1040 Echallens</p>
            <p><strong>Email :</strong> vincenzo.dimassa(at)bluewin.ch</p>
            <p><strong>Téléphone :</strong> 079 522/05/37</p>
        </div>

        <div class="comite-card">
            <h3>Philippe Grandchamp</h3>
            <p><strong>Fonction :</strong> Caissier</p>
            <p><strong>Adresse :</strong> Chemin de la Borne 2, 1055 Froideville</p>
            <p><strong>Email :</strong> philippe.grandchamp(at)tcboussens.ch</p>
            <p><strong>Téléphone :</strong> 021 882/56/82 / 079 706/59/68</p>
        </div>

        <div class="comite-card">
            <h3>Olivier Decroes</h3>
            <p><strong>Fonction :</strong> Secrétaire</p>
            <p><strong>Adresse :</strong> Ruelle de la Chapelle 7, 1034 Boussens</p>
            <p><strong>Email :</strong> tcboussens(at)bluewin.ch</p>
            <p><strong>Téléphone :</strong> 076 529/35/89</p>
        </div>

        <div class="comite-card">
            <h3>Jean Rossier</h3>
            <p><strong>Fonction :</strong> Responsable Juniors</p>
            <p><strong>Adresse :</strong> Avenue du Clos d'Aubonne 48B, 1814 La Tour-De-Peilz</p>
            <p><strong>Email :</strong> jeanrossier56(at)gmail.com</p>
            <p><strong>Téléphone :</strong> 079 233/92/52</p>
        </div>

        <div class="comite-card">
            <h3>Eyal Kaspi</h3>
            <p><strong>Fonction :</strong> Membre</p>
            <p><strong>Adresse :</strong> Grand'Rue 12, 1034 Boussens</p>
            <p><strong>Email :</strong> eyal.kaspi(at)gmail.com</p>
            <p><strong>Téléphone :</strong> 078 784/88/00</p>
        </div>
</section>


    <section id="reglement">
      <h2>Règlement / Statuts</h2>
      <div class="rules" data-rules>
        <article class="rule-block" data-rule-block data-open>
          <button type="button" class="rule-toggle" aria-expanded="true">
            <span class="rule-toggle__title">Les réservations</span>
            <span class="rule-toggle__chevron" aria-hidden="true">▾</span>
          </button>
          <div class="rule-panel" role="region">
            <ul>
              <li>Les réservations sont obligatoires et se font online sur le site du Tennis Club Boussens.</li>
              <li>Pour enregistrer une réservation, il est obligatoire d'être membre du club.</li>
              <li>Lors de l'enregistrement d'une réservation, il est obligatoire de spécifier son partenaire de jeu. Celui-ci peut être soit un membre du Club (gratuit), soit un invité junior (CHF 10.-) ou adulte (CHF 15.-).</li>
              <li>Un membre a le droit de faire 5 réservation(s) par semaine dont seulement 4 réservation(s) après 18h00.</li>
              <li>Une réservation enregistrée au maximum 60 minute(s) avant celle-ci est considérée comme une réservation "last minute". Une réservation "last minute" n'est pas prise en compte dans les réservations de la semaine. Le nombre de réservation "last minute" par semaine n'est pas limité.</li>
              <li>Un membre n'a pas le droit de réserver les deux terrains en même temps.</li>
              <li>Un membre n'a pas le droit de réserver deux plages horaires qui se suivent.</li>
              <li>Une réservation peut être enregistrée au maximum 10 jour(s) avant celle-ci.</li>
              <li>Une réservation peut être annulée jusqu'à 60 minute(s) avant celle-ci.</li>
            </ul>
          </div>
        </article>
        <article class="rule-block" data-rule-block>
          <button type="button" class="rule-toggle" aria-expanded="false">
            <span class="rule-toggle__title">Utilisation des courts</span>
            <span class="rule-toggle__chevron" aria-hidden="true">▾</span>
          </button>
          <div class="rule-panel" role="region" hidden>
            <ul>
              <li>Les courts doivent être brossés après chaque utilisation.</li>
              <li>Les lumières sont allumées uniquement si cela est nécessaire.</li>
              <li>Les lumières s'éteignent automatiquement à 22h00. Veillez donc à brosser le court avant cette échéance.</li>
            </ul>
          </div>
        </article>
        <article class="rule-block subtle" data-rule-block>
          <button type="button" class="rule-toggle" aria-expanded="false">
            <span class="rule-toggle__title">Cotisations & Invitations</span>
            <span class="rule-toggle__chevron" aria-hidden="true">▾</span>
          </button>
          <div class="rule-panel" role="region" hidden>
            <p>Consultez les formules et tarifs d'adhésion dans la section <a href="#cotisations"><strong>Cotisations</strong></a> ci‑dessous.</p>
          </div>
        </article>
      </div>
    </section>

    <section id="cotisations">
      <h2>Cotisations</h2>
      <p class="intro">Découvrez nos formules d'adhésion. Chaque cotisation inclut l'accès aux courts, la réservation en ligne et la participation aux activités du club.</p>
      <div class="pricing-grid">
        <div class="price-card highlight">
          <div class="price-card__head">
            <h3>Adulte</h3>
            <span class="badge">Standard</span>
          </div>
            <p class="price"><span>290</span><small>.– / an</small></p>
            <ul class="features">
              <li>Accès illimité courts</li>
              <li>Réservation en ligne</li>
              <li>Tournoi interne</li>
              <li>Événements & réseau</li>
            </ul>
        </div>
        <div class="price-card">
          <div class="price-card__head">
            <h3>Junior</h3>
            <span class="badge neutral">-18</span>
          </div>
          <p class="price"><span>100</span><small>.– / an</small></p>
          <ul class="features">
            <li>Accès encadré</li>
            <li>École juniors</li>
            <li>Tournoi juniors</li>
            <li>Cours préférentiels</li>
          </ul>
        </div>
        <div class="price-card">
          <div class="price-card__head">
            <h3>Étudiant</h3>
            <span class="badge neutral">≥18</span>
          </div>
          <p class="price"><span>140</span><small>.– / an</small></p>
          <ul class="features">
            <li>Accès illimité</li>
            <li>Horaires flexibles</li>
            <li>Interclubs</li>
            <li>Réseau étudiants</li>
          </ul>
        </div>
        <div class="price-card">
          <div class="price-card__head">
            <h3>Couple</h3>
            <span class="badge">Duo</span>
          </div>
          <p class="price"><span>510</span><small>.– / an</small></p>
          <ul class="features">
            <li>2 accès adultes</li>
            <li>Réservations flexibles</li>
            <li>Événements sociaux</li>
            <li>Support prioritaire</li>
          </ul>
        </div>
        <div class="price-card">
          <div class="price-card__head">
            <h3>Famille</h3>
            <span class="badge">Pack</span>
          </div>
          <p class="price"><span>590</span><small>.– / an</small></p>
          <ul class="features">
            <li>2 adultes + juniors</li>
            <li>Priorité école</li>
            <li>Animations familiales</li>
            <li>Communication dédiée</li>
          </ul>
        </div>
      </div>
      <div class="notes">
        <h3>Informations Utiles</h3>
        <ul>
          <li>Junior: jusqu'à 18 ans non révolus.</li>
          <li>Attestation requise pour le tarif étudiant.</li>
          <li>Les cotisations couvrent l'année civile (non fractionnables).</li>
          <li>Invité: Junior 10.– / séance, Adulte 15.– / séance.</li>
        </ul>
      </div>
      <div class="cta-center">
        <a href="https://demo.plugin.ch/" class="btn primary">Devenir membre</a>
        <a href="#reglement" class="btn">Voir le règlement</a>
      </div>
    </section>

    <section id="plan">
        <h2>Plan d'accès</h2>
        <p>Le Tennis Club Boussens est situé dans un cadre paisible à la campagne vaudoise.</p>
        <div style="width: 100%; height: 400px; margin-top: 1rem;">
            <iframe
            src="https://www.google.com/maps?q=46.6007999,6.5892179&hl=fr&z=15&output=embed"
            width="100%"
            height="100%"
            style="border:0;"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade">
            </iframe>
        </div>
        </section>


    <section id="ecole">
      <h2>École de Tennis</h2>
      <p>Une toute bienvenue à toutes celles et à ceux qui souhaitent rejoindre la nouvelle saison d’entraînements de l’école de tennis au TC Boussens.</p>
      <ul>
        <li>Au programme, 18 semaines de cours juniors collectifs</li>
        <li>1ère partie: des vacances de Pâques aux vacances d'été et 2ème partie: des vacances d'été aux vacances d'automne (avec une pause pendant les vacances scolaires d'été)</li>
        <li>Les inscriptions sont possibles en tout temps, sous réserve des places disponibles</li>
        <li>Le TARIF des cours collectifs pour toute la saison à raison d’un cours par semaine, est publié dans les News du site</li>
        <li>Des cours privés (adultes) sont aussi prodigués sur demande (contacter Le Comité / Responsable cours – juniors)</li>
      </ul>
    </section>

    <section id="contacts">
        <h2>Contacts</h2>
        <p>Pour toute question concernant le club, les réservations, les cours ou les cotisations, n’hésitez pas à contacter un membre du <a href="#comite">Comité</a>.</p>
    </section>

  </main>

<script>
  // Navigation mono-page + menu mobile
  document.addEventListener('DOMContentLoaded', () => {
  const sections = document.querySelectorAll('main section');
  // Liens internes (ancre #...) non externes
  const internalLinks = document.querySelectorAll('a[href^="#"]:not(.external)');
    const toggleBtn = document.querySelector('.nav-toggle');
    const nav = document.getElementById('site-nav');
  const newsContainer = document.querySelector('.news');
  const newsToggle = newsContainer?.querySelector('.news-toggle');
  const newsPanel = newsContainer?.querySelector('.news-panel');
  const newsStatus = newsPanel?.querySelector('[data-status]');
  const newsList = newsPanel?.querySelector('.news-list');

    function showSection(id) {
      sections.forEach(sec => {
        sec.style.display = (sec.id === id) ? 'block' : 'none';
      });
      // Marquage actif
      internalLinks.forEach(l => {
        const target = l.getAttribute('href').substring(1);
        l.classList.toggle('active', target === id);
      });
    }
    showSection('accueil');
    internalLinks.forEach(link => {
      link.addEventListener('click', e => {
        const hash = link.getAttribute('href');
        if (!hash || !hash.startsWith('#')) return;
        e.preventDefault();
        const id = hash.substring(1);
        if (id) {
          showSection(id);
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        if (toggleBtn.getAttribute('aria-expanded') === 'true') {
          toggleBtn.click();
        }
      });
    });

    // Toggle mobile
    toggleBtn.addEventListener('click', () => {
      const expanded = toggleBtn.getAttribute('aria-expanded') === 'true';
      toggleBtn.setAttribute('aria-expanded', String(!expanded));
      nav.classList.toggle('open');
      toggleBtn.classList.toggle('open');
    });

    // News collapsible
    if (newsToggle && newsPanel) {
      newsToggle.addEventListener('click', () => {
        const expanded = newsToggle.getAttribute('aria-expanded') === 'true';
        newsToggle.setAttribute('aria-expanded', String(!expanded));
        newsPanel.hidden = expanded; // cache si on replie
        newsContainer.classList.toggle('is-expanded', !expanded);
        newsContainer.classList.toggle('is-collapsed', expanded);
      });
    }

    // Chargement dynamique des news depuis Google Sheets
    if (newsContainer && newsList) {
      const SHEET_ID = newsContainer.getAttribute('data-sheet-id');
      const SHEET_GID = newsContainer.getAttribute('data-sheet-gid') || '0';
      const CSV_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${SHEET_GID}`;

      fetch(CSV_URL, { cache: 'no-store' })
        .then(r => {
          if (!r.ok) throw new Error('HTTP ' + r.status);
          return r.text();
        })
        .then(text => {
          // Parsing CSV simple avec support des champs quotés
          const rows = [];
          let cur = ''; let inQuotes = false; let row = [];
          for (let i = 0; i < text.length; i++) {
            const c = text[i];
            const next = text[i+1];
            if (c === '"') {
              if (inQuotes && next === '"') { cur += '"'; i++; }
              else { inQuotes = !inQuotes; }
            } else if (c === ',' && !inQuotes) {
              row.push(cur.trim()); cur = '';
            } else if ((c === '\n' || c === '\r') && !inQuotes) {
              if (cur.length || row.length) { row.push(cur.trim()); rows.push(row); row = []; cur=''; }
            } else {
              cur += c;
            }
          }
          if (cur.length || row.length) { row.push(cur.trim()); rows.push(row); }

          if (!rows.length) throw new Error('Aucune donnée');
          // Enlever header
            const data = rows.slice(1).filter(r => r.some(v => v));
          // Construire objets
          const items = data.map(r => ({
            dateRaw: r[0] || '',
            title: r[1] || 'Sans titre',
            body: r[2] || ''
          })).filter(it => it.title || it.body);

          // Trier par date (si parse possible)
          items.sort((a,b) => new Date(b.dateRaw) - new Date(a.dateRaw));

          if (!items.length) {
            newsStatus.textContent = 'Aucune actualité pour le moment.';
            return;
          }

          newsStatus.remove();
          const fmt = new Intl.DateTimeFormat('fr-CH', { dateStyle: 'medium' });
          items.forEach(it => {
            const article = document.createElement('article');
            article.className = 'news-item';
            article.setAttribute('role','listitem');
            const date = it.dateRaw && !isNaN(new Date(it.dateRaw)) ? fmt.format(new Date(it.dateRaw)) : it.dateRaw;
            article.innerHTML = `
              <h4>${escapeHtml(it.title)}</h4>
              <p class="news-meta">${date ? '<time>'+escapeHtml(date)+'</time>' : ''}</p>
              <p>${linkify(escapeHtml(it.body)).replace(/\n/g,'<br>')}</p>
            `;
            newsList.appendChild(article);
          });
        })
        .catch(err => {
          if (newsStatus) newsStatus.textContent = 'Impossible de charger les actualités (' + err.message + ').';
        });
    }

    // Utilitaires d'échappement & linkify
    function escapeHtml(str='') {
      return str.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c]));
    }
    function linkify(str='') {
      const urlRegex = /(https?:\/\/[^\s]+)/g;
      return str.replace(urlRegex, url => `<a href="${url}" target="_blank" rel="noopener">${url}</a>`);
    }

    // Accordéon Règlement
    const ruleBlocks = document.querySelectorAll('[data-rule-block]');
    ruleBlocks.forEach(block => {
      const btn = block.querySelector('.rule-toggle');
      const panel = block.querySelector('.rule-panel');
      if (!btn || !panel) return;
      if (block.hasAttribute('data-open')) {
        panel.style.maxHeight = panel.scrollHeight + 'px';
      }
      btn.addEventListener('click', () => {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
        if (expanded) {
          panel.setAttribute('hidden','');
          panel.style.maxHeight = '0px';
        } else {
          panel.removeAttribute('hidden');
          panel.style.maxHeight = panel.scrollHeight + 'px';
        }
        block.classList.toggle('is-open', !expanded);
      });
    });
  });
</script>
</body>